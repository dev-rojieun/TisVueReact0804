<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Document</title>

    <link rel="stylesheet" href="../css/reset.css" />

    <style>
        #parent {
            background-color: lightblue;
            padding: 50px;
        }

        #child {
            background-color: lightcoral;
            margin: 50px;
            padding: 20px;
        }
    </style>
</head>

<body>
    <pre>

    ìì‹ -> ë¶€ëª¨ ë°ì´í„° ì „ë‹¬í•˜ëŠ” ì˜ˆì œë¥¼ ì‘ì„±í•œë‹¤.

    ìì‹ ì»´í¬ë„ŒíŠ¸ì—ì„œ ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ì˜ ìƒíƒœê°’ì„ ë³€ê²½í•˜ê³  ì‹¶ì€ ê²½ìš°ì—ëŠ” ìƒíƒœê°’ ì˜¬ë¦¼(state up)ì„ ì´ìš©í•œë‹¤.
    ìƒíƒœê°’ ì˜¬ë¦¼(state up)ì€ ë¶€ëª¨ ë©”ì„œë“œ ì½œë°± ì´ë‹¤.

    ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ì—ì„œ ìì‹ ì»´í¬ë„ŒíŠ¸ë¡œ ë¶€ëª¨ì˜ ë©”ì„œë“œë¥¼ props ë¥¼ ì´ìš©í•˜ì—¬ ì „ë‹¬í•˜ê³ 
    ìì‹ ì»´í¬ë„ŒíŠ¸ì—ì„œ ë¶€ëª¨ì˜ ì½œë°± ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ëŠ” ì‹ìœ¼ë¡œ ë°ì´í„°ë¥¼ ë„˜ê¸´ë‹¤.

    (
        ì»¨í…Œì´ë„ˆëŠ” ë¦¬ë•ìŠ¤ë¡œ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ë„ë¡ ë§Œë“œëŠ”ê²Œ ì¢‹ë‹¤.

        ìƒìœ„ ì»´í¬ë„ŒíŠ¸ì— ìì‹ ì»´í¬ë„ŒíŠ¸ê°€ ë°ì´í„° ì£¼ê³ ë°›ê¸°~

        í¬í•¨ê´€ê³„  :  ì»´í¬ë„ŒíŠ¸ <-> ì»´í¬ë„ŒíŠ¸ ê°„ ë°ì´í„° ì£¼ê³ ë°›ê¸°ë¥¼ í•  ë–„ëŠ” ë¶€ëª¨ê°€ ìˆì–´ì•¼í•¨! ë¶€ëª¨ê°€ ë§¤ê°œì²´ê°€ ë˜ì–´ì•¼í•¨.
        ìƒì†ê´€ê³„  :  ë¶€ëª¨/ìì‹ ê´€ê³„ë¼ë©´ props ë¥¼ í†µí•´ ë¶€ëª¨ë©”ì„œë“œí˜¸ì¶œ(ì½œë°±)ë¡œ ì£¼ê³ ë°›ê¸° (ë¶€ëª¨ê°€ ìˆìœ¼ë‹ˆê¹Œ)

    )

    ì»´í¬ë„ŒíŠ¸ 2ê°œ ë§Œë“¤ê¸°: Child, Parent

    ê¸°ëŠ¥ ì¶”ê°€
    1. '+' ë²„íŠ¼ í´ë¦­í•˜ë©´ 1ì”© ì¦ê°€í•˜ëŠ” ê¸°ëŠ¥ì€ ê°ì êµ¬í˜„í•œë‹¤.
    ==> onClick ì´ë²¤íŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ì²˜ë¦¬
    2. "shift í‚¤ ì™€ '+' ë²„íŠ¼ í´ë¦­í•˜ë©´ 10ì”© ì¦ê°€" ê°™ì´ êµ¬í˜„í•œë‹¤.

    êµ¬ê¸€ ê²€ìƒ‰: React pass parameter to parent component or call parent function on ES6
    https://osc131.tistory.com/137
    https://maxlibin.com/react-call-parent-function-on-es6/

    </pre>
    <hr>

    <div id="app">
        <div id="parent">
            I am a parent

            <div id="child">
                4
                <br/>
                I am a child
                <br/>
                <button onClick="doParentToggleFromChild">
                    toggle
                </button>
            </div>
        </div>
    </div>
</body>
</html>




<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/6.26.0/babel.js">
    /* ìë°”ìŠ¤í¬ë¦½íŠ¸ë¡œ ì»´íŒŒì¼ëŸ¬. ES6-->ES5, JSX-->ES5 */
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react/16.12.0/umd/react.development.js">
    /* import React, { Component, PureComponent } from "react" */
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/16.11.0/umd/react-dom.development.js">
    /* import ReactDOM from "react-dom" */
</script>
<script type="text/babel">
    class Child extends React.Component {

        doParentToggleFromChild = (event)=>{
            // ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ëŠ” í™”ì‚´í‘œ í•¨ìˆ˜ë¡œ ë§Œë“¤ë©´ this bind()ë¥¼ ìƒëµí•´ë„ ëœë‹¤
            console.log(event.target);

            // ë¶€ëª¨ì˜ ì½œë°± ë©”ì„œë“œë¥¼ í˜¸ì¶œ í• êº¼ì•¼
            // debugger;
            let value = event.shiftKey ? 10 : 1;
            this.props.doParentToggleFromChild( value );

        }

        render() { // JSXë¡œ í™”ë©´ ë§Œë“¤ê¸°
            return (
                <div id="child">
                    {this.props.count}  {/*ë¶€ëª¨ë¡œë¶€í„° ë°›ì„ê±°ì•¼*/}
                    <br/>
                    I am a child
                    <br/>
                    <button onClick={this.doParentToggleFromChild}>  {/*ë¶€ëª¨ë¡œë¶€í„° ë°›ì„ê±°ì•¼*/}
                        toggle
                    </button>
                </div>
            )
        }
    };


    class Parent extends React.Component {
        state = {
            // ìƒíƒœê°’(ë³€ìˆ˜)ì„ ì •ì˜í•œë‹¤.
            count : 0,
        }
        func = {
            // ìì‹ë“¤ì—ê²Œ ì¤„ ë©”ì„œë“œë“¤ì„ ì—¬ê¸° ë„£ì–´ë‘ê³  ...this.func í˜•ì‹ìœ¼ë¡œ í•œêº¼ë²ˆì— ë‚´ë¦¬ì.. ğŸ˜
            // funcì— ì •ì˜ëœ ë©”ì„œë“œëŠ” ë°˜ë“œì‹œ constructorì—ì„œ thisë¥¼ bind() ì²˜ë¦¬í•´ì•¼ í•œë‹¤.
            // funcì—ëŠ” ìì‹ ì»´í¬ë„ŒíŠ¸ì— ë„˜ê¸¸ ë©”ì„œë“œë§Œ ì‘ì„±í•œë‹¤.
            // ì™œ ìì‹ì—ê²Œ ë¶€ëª¨ ë©”ì„œë“œë¥¼ ë„˜ê¸°ë‚˜? ë¶€ëª¨ì˜ ìƒíƒœê°’ì„ ë³€ê²½í•˜ê¸° ìœ„í•´ì„œ.

            doParentToggleFromChild (value) {
                // this.state.count = this.state.count + 1;
                this.setState({
                    ...this.state,
                    count : this.state.count + value
                });
            }

        }

        constructor(props) {
            super()
            // this ë°”ì¸ë”©. ì˜ˆì‹œ) this.func.handler = this.func.handler.bind(this)
            // func ì— ì •ì˜í•œ ë©”ì„œë“œëŠ” ë°˜ë“œì‹œ this bind ì²˜ë¦¬í•´ì•¼ í•œë‹¤.

            // ref ë§Œë“¤ê¸°. ì˜ˆì‹œ) this.inputref = React.createRef()

            // ì—¬ê¸°ì— ì„ ì–¸í•˜ì§€ ì•Šìœ¼ë©´ func ì˜ doParentToggleFromChild ë©”ì„œë“œì— this ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤.
            this.func.doParentToggleFromChild = this.func.doParentToggleFromChild.bind(this);

        }

        render() { // JSXë¡œ í™”ë©´ ë§Œë“¤ê¸°
            return (
                <div id="parent">
                    I am a parent
                    <Child {...this.state} {...this.func}></Child>
                </div>
            )
        }
    };
    //export default Parent;

    ReactDOM.render(<Parent></Parent>, document.getElementById('app'))
</script>
